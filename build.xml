<?xml version="1.0"?> 
<project name="owlapibundle" default="bundle" basedir="..">

  <property name="src" location="${owlapi.dir}/src"/>
  <property name="jar"     value="org.protege.services.owlapi.jar"/>

  <path id="project.classpath">
  	<path refid="osgi.libs"/>
  	<fileset refid="owl.libs"/>
  	<fileset refid="owlapi.libs"/>
  </path>
	
  <target name="init"> 
    <echo message="---------------Building OWLAPI Bundle-------------"/>
  	<mkdir dir="${classes.owlapi}"/>
  </target>
	
  <target name="compile" depends="init">
  	<javac srcdir="${src}" destdir="${classes.owlapi}"
  		   debug="${debug}" includeAntRuntime = "${includeAntRuntime}">
  		<classpath refid="project.classpath"/>
  	</javac>
  </target>

  <target name="bundle" depends="compile">
  	<jar jarfile  = "${dist.dir}/bundles/${jar}">
  		<fileset dir="${classes.owlapi}"/>
    </jar>	
    <jar jarfile  = "${dist.dir}/bundles/${jar}" 
         update   = "true"
         compress = "true" 
         manifest = "${owlapi.dir}/META-INF/MANIFEST.MF">
        <fileset dir="${owl.dir}/lib">
             <include name="owlapi-*.jar"/>
             <include name="commons-lang-2.2.jar"/>
             <include name="log4j.jar"/>
        </fileset>
    </jar>
  </target> 

</project>
