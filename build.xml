<?xml version="1.0"?> 
<project name="owlapibundle" default="bundle" basedir=".">

  <!-- default values of the properties to allow this to run standalone -->
  <!-- these values will be ignored as part of a bigger build           -->

  <property name = "build"          location = "./build"/>
  <property name = "owlapi.name"    value    = "owlapi"/>
  <property name = "owlapi.dir"     location = "."/>
  <property name = "owlapi.classes" location = "${build}/classes"/>
  <property name = "owlapi.in.jar"  value = "owlapi-bin.jar"/>
  <property name = "owlapi.out.jar" location = "${build}/dist/bundles/org.semanticweb.owl.owlapi.jar"/>


  <property name="src" location="${owlapi.dir}/src"/>

  <path id="project.classpath">
  	<path refid="osgi.libs"/>
        <fileset dir="${owlapi.dir}/lib"/>
  </path>
	
  <target name="init"> 
    <echo message="---------------Building OWLAPI Bundle-------------"/>
  </target>

  <!--
     = See revision 7836 for a build file that creates a jar file
     = where the owlapi jars are flattened and can therefore function
     = as both a java jar and an OSGi bundle. The performance
     = impact of this change seems negligible.
    -->

  <target name="bundle">
    <copy todir="${owlapi.classes}/lib">
      <fileset dir="${owlapi.dir}/lib" includes="*.jar" excludes="${owlapi.in.jar}"/>
    </copy>
  	<copy file="${owlapi.dir}/lib/${owlapi.in.jar}"
  		  tofile="${owlapi.out.jar}"/>
    <jar basedir = "${owlapi.classes}"
         jarfile  = "${owlapi.out.jar}"
    	 update = "true"
         manifest = "${owlapi.dir}/META-INF/MANIFEST.MF"/>
  </target> 

  <!-- this target is to be used in the case where this is 
       not part of a bigger build                          -->
  <target name="clean">
      <delete dir="${build}"/>
  </target>
</project>
