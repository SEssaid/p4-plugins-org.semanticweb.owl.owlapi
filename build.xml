<?xml version="1.0"?> 
<project name="owlapibundle" default="bundle" basedir=".">
  <property file="local.properties"/>

  <property name="src" location="${owlapi.dir}/src"/>

  <path id="project.classpath">
      <path refid="osgi.libs"/>
        <fileset dir="${owlapi.dir}/lib"/>
  </path>
    
  <target name="init"> 
    <echo message="---------------Building OWLAPI Bundle-------------"/>
  </target>
  
  <!-- =================================================================== -->
  <!-- BND -->
  <!-- =================================================================== -->

  <target name = "bnd" depends = "init">
      <taskdef resource="aQute/bnd/ant/taskdef.properties"
               classpath="tools/bnd.jar"/> 
      <echo message="Analyzing java bytecode to generate OSGi imports and exports"/>
      <bnd classpath  = "${owlapi.dir}/lib/owlapi-bin.jar"
           files      = "${owlapi.dir}/META-INF/manifest.bnd"
           eclipse    = "false"
           failok     = "false"
           exceptions = "true"
           output     = "${owlapi.jar}"/>
      <echo message="OSGi owlapi bundle built"/>
  </target>


  <!-- ===================================================================================== -->
  <!-- JAR - create the distribution JAR file that goes in the OSGi "plugins" directory -->
  <!-- ===================================================================================== -->
  <target name="bundle" depends="init">
      <copy file="${owlapi.dir}/lib/owlapi-bin.jar"
            tofile="${owlapi.jar}"/>
      <jar destfile="${owlapi.jar}"
           manifest="${owlapi.dir}/META-INF/MANIFEST.MF"
           update="true"/>
  </target> 

  <target name = "junit" depends="init"/>

  <!-- this target is to be used in the case where this is 
       not part of a bigger build                          -->
  <target name="clean">
      <delete dir="${build}"/>
  </target>


</project>
