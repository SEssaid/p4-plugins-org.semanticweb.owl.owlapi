<?xml version="1.0"?> 
<project name="owlapibundle" default="bundle" basedir="..">

  <property name="src" location="${owlapi.dir}/src"/>

  <path id="project.classpath">
  	<path refid="osgi.libs"/>
        <fileset dir="${owlapi.dir}/lib"/>
  </path>
	
  <target name="init"> 
    <echo message="---------------Building OWLAPI Bundle-------------"/>
  	<mkdir dir="${owlapi.classes}"/>
  </target>

  <!--
  <target name="compile" depends="init">
  	<javac srcdir="${src}" destdir="${owlapi.classes}"
  		   debug="${debug}" includeAntRuntime = "${includeAntRuntime}">
  		<classpath refid="project.classpath"/>
  	</javac>
  </target>
  -->

  <target name="uptodate">
      <condition property="owlapi.uptodate">
          <and>
              <uptodate srcfile="${owlapi.dir}/lib/commons-lang-2.2.jar" 
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-krssparser.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-oboparser.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-api.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-owlxmlparser.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-apibinding.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-owlxmlrenderer.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-debugging.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-rdfapi.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-dig1_1.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-rdfxmlparser.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-functionalparser.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-rdfxmlrenderer.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-functionalrenderer.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-util.jar"
                        targetfile="${owlapi.jar}"/>
              <uptodate srcfile="${owlapi.dir}/lib/owlapi-impl.jar"
                        targetfile="${owlapi.jar}"/>
          </and>
      </condition>
  </target>
  
  <target name="bundle" depends="uptodate" unless="owlapi.uptodate">
    <unjar src = "${owlapi.dir}/lib/commons-lang-2.2.jar" 
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-krssparser.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-oboparser.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-api.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-owlxmlparser.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-apibinding.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-owlxmlrenderer.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-debugging.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-rdfapi.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-dig1_1.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-rdfxmlparser.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-functionalparser.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-rdfxmlrenderer.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-functionalrenderer.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-util.jar"
           dest="${owlapi.classes}"/>
    <unjar src = "${owlapi.dir}/lib/owlapi-impl.jar"
           dest="${owlapi.classes}"/>
    <jar basedir = "${owlapi.classes}"
         jarfile  = "${owlapi.jar}"
         manifest = "${owlapi.dir}/META-INF/MANIFEST.MF"/>
  </target> 

</project>
